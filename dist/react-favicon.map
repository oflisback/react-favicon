{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap b2c002aac8dba6d2a433","webpack:///./index.js","webpack:///./lib/react-favicon.js","webpack:///external \"React\""],"names":[],"mappings":"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","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"React\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"React\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Favicon\"] = factory(require(\"React\"));\n\telse\n\t\troot[\"Favicon\"] = factory(root[\"React\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_2__) {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap b2c002aac8dba6d2a433\n **/","module.exports = require('./lib/react-favicon');\n\n\n\n/** WEBPACK FOOTER **\n ** ./index.js\n **/","var React = require('react');\nvar linkEl;\n\nfunction drawIcon(src, num, cb) {\n  var img = document.createElement('img');\n  img.onload = function() {\n    var canvas = document.createElement('canvas');\n    canvas.width = img.width;\n    canvas.height = img.height;\n\n    var context = canvas.getContext('2d');\n    context.clearRect(0, 0, img.width, img.height);\n    context.drawImage(img, 0, 0);\n\n    var top = img.height - 9,\n        left = img.width - 7 - 1,\n        bottom = 16,\n        right = 16,\n        radius = 2;\n\n    context.fillStyle = '#F03D25';\n    context.strokeStyle = '#F03D25';\n    context.lineWidth = 1;\n\n    context.beginPath();\n    context.moveTo(left + radius, top);\n    context.quadraticCurveTo(left, top, left, top + radius);\n    context.lineTo(left, bottom - radius);\n    context.quadraticCurveTo(left, bottom, left + radius, bottom);\n    context.lineTo(right - radius, bottom);\n    context.quadraticCurveTo(right, bottom, right, bottom - radius);\n    context.lineTo(right, top + radius);\n    context.quadraticCurveTo(right, top, right - radius, top);\n    context.closePath();\n    context.fill();\n\n    context.font = 'bold 10px arial';\n    context.fillStyle = '#FFF';\n    context.textAlign = 'right';\n    context.textBaseline = 'top';\n    context.fillText(num, 15, 6);\n\n    cb(null, context.canvas.toDataURL());\n  };\n  img.src = src;\n\n}\n\nvar Favicon = React.createClass({\n  displayName: 'Favicon',\n\n  getDefaultProps: function() {\n    return {\n      alertCount: null,\n      animated: true,\n      animationDelay: 500\n    }\n  },\n\n  getInitialState: function() {\n    return {\n      animationIndex: 0,\n      animationLoop: null,\n      animationRunning: false\n    }\n  },\n\n  statics: {\n    mountedInstances: [],\n\n    getActiveInstance: function() {\n      return Favicon.mountedInstances[Favicon.mountedInstances.length-1];\n    },\n\n    draw: function() {\n      if (typeof linkEl === 'undefined') {\n        var head = document.getElementsByTagName('head')[0];\n        linkEl = document.createElement('link');\n        linkEl.type = 'image/x-icon';\n        linkEl.rel = 'icon';\n\n        // remove existing favicons\n        var links = head.getElementsByTagName(\"link\");\n        for (var i = links.length; --i >= 0; /\\bicon\\b/i.test(links[i].getAttribute(\"rel\")) && head.removeChild(links[i])) {}\n\n        head.appendChild(linkEl);\n      }\n\n      var activeInstance = Favicon.getActiveInstance();\n      var currentUrl;\n\n      if (activeInstance.props.url instanceof Array) {\n        currentUrl = activeInstance.props.url[activeInstance.state.animationIndex];\n      } else {\n        currentUrl = activeInstance.props.url;\n      }\n\n      if (activeInstance.props.alertCount) {\n        drawIcon(currentUrl, activeInstance.props.alertCount, function(err, url) {\n          linkEl.href = url;\n        });\n      } else {\n        linkEl.href = currentUrl;\n      }\n\n    },\n\n    update: function() {\n      if (typeof document === 'undefined') return;\n\n      var activeInstance = Favicon.getActiveInstance();\n      var isAnimated = activeInstance.props.url instanceof Array && activeInstance.props.animated;\n\n      // clear any running animations\n      var intervalId = null;\n      clearInterval(activeInstance.state.animationLoop);\n\n      if (isAnimated) {\n        var animateFavicon = function animateFavicon() {\n          var nextAnimationIndex = (activeInstance.state.animationIndex+1)%activeInstance.props.url.length\n          Favicon.draw();\n          activeInstance.setState({animationIndex: nextAnimationIndex});\n        };\n        intervalId = setInterval(animateFavicon, activeInstance.props.animationDelay);\n        animateFavicon();\n      } else {\n        Favicon.draw();\n      }\n\n      activeInstance.setState({animationLoop:intervalId});\n    }\n  },\n\n  componentWillMount: function() {\n    Favicon.mountedInstances.push(this);\n    Favicon.update();\n  },\n\n  componentDidUpdate: function(prevProps) {\n    if (prevProps.url === this.props.url && prevProps.animated === this.props.animated) return\n\n    Favicon.update();\n  },\n\n  render: function () {\n    return null;\n  }\n});\n\nmodule.exports = Favicon;\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/react-favicon.js\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_2__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"React\"\n ** module id = 2\n ** module chunks = 0\n **/"],"sourceRoot":"","file":"./dist/react-favicon.js"}